(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))a(e);new MutationObserver(e=>{for(const n of e)if(n.type==="childList")for(const l of n.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&a(l)}).observe(document,{childList:!0,subtree:!0});function c(e){const n={};return e.integrity&&(n.integrity=e.integrity),e.referrerpolicy&&(n.referrerPolicy=e.referrerpolicy),e.crossorigin==="use-credentials"?n.credentials="include":e.crossorigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function a(e){if(e.ep)return;e.ep=!0;const n=c(e);fetch(e.href,n)}})();const g=document.querySelector("#switcher-button");function y(){document.body.classList.add("dark"),localStorage.theme="dark"}function b(){document.body.classList.remove("dark"),localStorage.theme="light"}g.addEventListener("click",()=>{document.body.classList.contains("dark")?b():y()});localStorage.theme==="dark"&&(document.body.classList.add("dark"),g.checked=!0);const p="https://books-backend.p.goit.global",E=()=>fetch(`${p}/books/category-list`).then(o=>{if(!o.ok)throw new Error(o.status);return o.json()}),C=o=>fetch(`${p}/books/category?category=${o}`).then(t=>{if(!t.ok)throw new Error(t.status);return t.json()}),f=document.querySelector(".categories_list");document.querySelector(".categories-books");const L=document.querySelector(".category-name"),k=document.querySelector(".category-books-wrap");w();f.addEventListener("click",T);function w(){E().then(o=>{S(o)}).catch(o=>Notiflix.Notify.failure("Oops! Something went wrong! Try reloading the page!",1e3,selectError()))}function S(o){const t=o.map(({list_name:c})=>`<li class="category_item">
      <button type="button" class="category-item-btn" name="${c}">
      ${c}
      </button>
      </li>`).join("");f.insertAdjacentHTML("beforeend",t)}async function T(o){const t=o.target.name;$(),await C(t).then(c=>{c.list_name!==""&&(console.log(c),x(c),L.textContent=t)}).catch(c=>Notiflix.Notify.failure("Oops! Something went wrong! Try reloading the page!",1e3,selectError()))}function x(o){const t=o.map(({book_image:c,author:a,title:e})=>`<div class="category-book-wrapper">
        <img class="category-book-img" src="${c}" alt="${e}" />
        <h2 class="category-name-book">${e}</h2>
        <p class="category-name-autor">${a}</p>
        </div>`).join("");k.insertAdjacentHTML("beforeend",t)}async function $(){k.innerHTML=""}document.addEventListener("DOMContentLoaded",function(){const o=document.querySelector("#categoryContainer");fetch("https://books-backend.p.goit.global/books/category-list").then(t=>t.json()).then(t=>{t.forEach(c=>{const a=document.createElement("div");a.classList.add("category");const e=document.createElement("h2");e.textContent=c.list_name,a.appendChild(e),fetch(`https://books-backend.p.goit.global/books/category?category=${c.list_name}`).then(n=>n.json()).then(n=>{const l=n;if(l.length>0){const d=document.createElement("ul");if(d.classList.add("book-list"),l.slice(0,5).forEach(i=>{const r=document.createElement("li");r.classList.add("book-item");const s=document.createElement("img");s.src=i.book_image,s.alt=i.title,s.classList.add("book-image"),r.appendChild(s);const m=document.createElement("h3");m.textContent=i.title,m.classList.add("book-title"),r.appendChild(m);const u=document.createElement("p");u.textContent=i.author,u.classList.add("book-author"),r.appendChild(u),d.appendChild(r)}),a.appendChild(d),l.length>5){const i=document.createElement("button");i.textContent="See More",i.classList.add("see-more-button"),a.appendChild(i),i.addEventListener("click",()=>{if(d.innerHTML="",l.slice(5).forEach(r=>{const s=document.createElement("li");s.classList.add("book-item");const m=document.createElement("img");m.src=r.book_image,m.alt=r.title,m.classList.add("book-image"),s.appendChild(m);const u=document.createElement("h3");u.textContent=r.title,u.classList.add("book-title"),s.appendChild(u);const h=document.createElement("p");h.textContent=r.author,h.classList.add("book-author"),s.appendChild(h),d.appendChild(s)}),l.slice(5).length===0){const r=document.createElement("p");r.textContent="Немає більше книг для цієї категорії",a.appendChild(r)}})}}else{const d=document.createElement("p");d.textContent="Немає популярних книг для цієї категорії",a.appendChild(d)}}).catch(n=>{console.log(`Сталася помилка при отриманні даних для категорії "${c.list_name}" з API:`,n)}),o.appendChild(a)})}).catch(t=>{console.log("Сталася помилка при отриманні даних з API:",t)})});
