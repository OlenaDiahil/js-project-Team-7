(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))a(e);new MutationObserver(e=>{for(const n of e)if(n.type==="childList")for(const l of n.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&a(l)}).observe(document,{childList:!0,subtree:!0});function r(e){const n={};return e.integrity&&(n.integrity=e.integrity),e.referrerpolicy&&(n.referrerPolicy=e.referrerpolicy),e.crossorigin==="use-credentials"?n.credentials="include":e.crossorigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function a(e){if(e.ep)return;e.ep=!0;const n=r(e);fetch(e.href,n)}})();const h="https://books-backend.p.goit.global",y=()=>fetch(`${h}/books/category-list`).then(o=>{if(!o.ok)throw new Error(o.status);return o.json()}),b=o=>fetch(`${h}/books/category?category=${o}`).then(t=>{if(!t.ok)throw new Error(t.status);return t.json()}),p=document.querySelector(".categories_list");document.querySelector(".categories-books");const k=document.querySelector(".category-name"),f=document.querySelector(".category-books-wrap");E();p.addEventListener("click",L);function E(){y().then(o=>{C(o)}).catch(o=>Notiflix.Notify.failure("Oops! Something went wrong! Try reloading the page!",1e3,selectError()))}function C(o){const t=o.map(({list_name:r})=>`<li class="category_item">
      <button type="button" class="category-item-btn" name="${r}">
      ${r}
      </button>
      </li>`).join("");p.insertAdjacentHTML("beforeend",t)}async function L(o){const t=o.target.name;x(),await b(t).then(r=>{r.list_name!==""&&(console.log(r),w(r),k.textContent=t)}).catch(r=>Notiflix.Notify.failure("Oops! Something went wrong! Try reloading the page!",1e3,selectError()))}function w(o){const t=o.map(({book_image:r,author:a,title:e})=>`<div class="category-book-wrapper">
        <img class="category-book-img" src="${r}" alt="${e}" />
        <h2 class="category-name-book">${e}</h2>
        <p class="category-name-autor">${a}</p>
        </div>`).join("");f.insertAdjacentHTML("beforeend",t)}async function x(){f.innerHTML=""}document.addEventListener("DOMContentLoaded",function(){const o=document.querySelector("#categoryContainer");fetch("https://books-backend.p.goit.global/books/category-list").then(t=>t.json()).then(t=>{t.forEach(r=>{const a=document.createElement("div");a.classList.add("category");const e=document.createElement("h2");e.textContent=r.list_name,a.appendChild(e),fetch(`https://books-backend.p.goit.global/books/category?category=${r.list_name}`).then(n=>n.json()).then(n=>{const l=n;if(l.length>0){const d=document.createElement("ul");if(d.classList.add("book-list"),l.slice(0,5).forEach(i=>{const c=document.createElement("li");c.classList.add("book-item");const s=document.createElement("img");s.src=i.book_image,s.alt=i.title,s.classList.add("book-image"),c.appendChild(s);const m=document.createElement("h3");m.textContent=i.title,m.classList.add("book-title"),c.appendChild(m);const u=document.createElement("p");u.textContent=i.author,u.classList.add("book-author"),c.appendChild(u),d.appendChild(c)}),a.appendChild(d),l.length>5){const i=document.createElement("button");i.textContent="See More",i.classList.add("see-more-button"),a.appendChild(i),i.addEventListener("click",()=>{if(d.innerHTML="",l.slice(5).forEach(c=>{const s=document.createElement("li");s.classList.add("book-item");const m=document.createElement("img");m.src=c.book_image,m.alt=c.title,m.classList.add("book-image"),s.appendChild(m);const u=document.createElement("h3");u.textContent=c.title,u.classList.add("book-title"),s.appendChild(u);const g=document.createElement("p");g.textContent=c.author,g.classList.add("book-author"),s.appendChild(g),d.appendChild(s)}),l.slice(5).length===0){const c=document.createElement("p");c.textContent="Немає більше книг для цієї категорії",a.appendChild(c)}})}}else{const d=document.createElement("p");d.textContent="Немає популярних книг для цієї категорії",a.appendChild(d)}}).catch(n=>{console.log(`Сталася помилка при отриманні даних для категорії "${r.list_name}" з API:`,n)}),o.appendChild(a)})}).catch(t=>{console.log("Сталася помилка при отриманні даних з API:",t)})});
